{"version":3,"sources":["components/Searchbar/Searchbar.jsx","services/apiSearchImg.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","App.jsx","index.jsx"],"names":["Searchbar","state","value","SubmitHandler","e","preventDefault","console","log","props","onSubmit","trim","toLowerCase","setState","changeHandler","target","this","className","type","onChange","placeholder","Component","PixabayFetchFunc","BASE_URL","API_KEY","_searchQuery","_searchPage","a","axios","defaults","baseURL","searchQuery","searchPage","url","get","result","data","hits","message","ImageGalleryItem","src","webformatURL","alt","ImageGallery","arreyImages","map","el","id","Button","onClick","loadMorer","text","newPixabayFetchFunc","App","searchValue","status","onsubmitHandler","submitSearchForm","scrollHandler","setTimeout","window","scrollTo","top","document","documentElement","scrollHeight","behavior","loadMoreHandler","getImages","then","prev","catch","error","prevProps","prevState","resetPage","response","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5af2d1c2.chunk.js","sourcesContent":["import { React, Component } from 'react';\nclass Searchbar extends Component {\n  state = {\n    value: '',\n  };\n\n  SubmitHandler = e => {\n    e.preventDefault();\n    console.log(' перед отправкой', this.state.value);\n    this.props.onSubmit(this.state.value.trim().toLowerCase());\n    this.setState({ value: '' });\n  };\n  changeHandler = e => {\n    this.setState({ value: e.target.value });\n  };\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   if (prevProps.searchQuery !== this.props.searchQuery)\n  //     console.log('get Fetch');\n  // }\n  render() {\n    const { value } = this.state;\n    console.log(value);\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.SubmitHandler}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            onChange={this.changeHandler}\n            value={value}\n            // autocomplete=\"off\"\n            // autofocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import axios from 'axios';\nexport class PixabayFetchFunc {\n  constructor(BASE_URL, API_KEY) {\n    this.BASE_URL = BASE_URL;\n    this.API_KEY = API_KEY;\n    this._searchQuery = '';\n    this._searchPage = 1;\n  }\n  get searchQuery() {\n    return this._searchQuery;\n  }\n\n  set searchQuery(value) {\n    return (this._searchQuery = value);\n  }\n\n  resetPage() {\n    return (this._searchPage = 1);\n  }\n\n  get searchPage() {\n    return this._searchPage;\n  }\n  set searchPage(value) {\n    return (this._searchPage += value);\n  }\n\n  async getImages() {\n    axios.defaults.baseURL = this.BASE_URL;\n    console.log(\n      'this.searchQuery',\n      this.searchQuery,\n      'searchPage',\n      this.searchPage,\n    );\n    let url = `?q=${this.searchQuery}&page=${this.searchPage}&key=${this.API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n    try {\n      const result = await axios.get(url);\n      const data = await result.data.hits;\n      return data;\n    } catch (error) {\n      console.log('err', error.message);\n    }\n\n    // return axios\n    //   .get(url)\n    //   .then(result => {\n    //     console.log(result);\n    //     return result.data;\n    //   })\n    //   .then(data => {\n    //     console.log(data.hits);\n    //     return data.hits;\n    //   })\n    //   .catch(err => {\n    //     console.log(err);\n    //   });\n  }\n}\n","import { Component } from 'react';\n\nexport class ImageGalleryItem extends Component {\n  render() {\n    return (\n      <li>\n        <img\n          src={this.props.webformatURL}\n          alt=\"\"\n          className=\"ImageGalleryItem-image\"\n        />\n      </li>\n    );\n  }\n}\n","import { Component } from 'react';\nimport { ImageGalleryItem } from '../ImageGalleryItem/ImageGalleryItem';\nexport default class ImageGallery extends Component {\n  render() {\n    return (\n      <ul className=\"ImageGallery\">\n        {this.props.arreyImages.map(el => {\n          return (\n            <ImageGalleryItem key={el.id} webformatURL={el.webformatURL} />\n          );\n        })}\n      </ul>\n    );\n  }\n}\n","import { Component } from 'react';\n// import { Component } from 'react';\n\nexport default class Button extends Component {\n  render() {\n    return (\n      <button type=\"button\" className=\"Button\" onClick={this.props.loadMorer}>\n        {this.props.text}\n      </button>\n    );\n  }\n}\n\n// class Button extends Component {\n//   render() {\n//     return (\n//       <button\n//         type=\"button\"\n//         className=\"Button\"\n//         onClick={this.props.loadMoreHandler}\n//       >\n//         Load more\n//       </button>\n//     );\n//   }\n// }\n// export default Button;\n","import './styles.css';\r\nimport React, { Component } from 'react';\r\nimport Searchbar from './components/Searchbar/Searchbar';\r\nimport { PixabayFetchFunc } from './services/apiSearchImg';\r\nimport ImageGallery from './components/ImageGallery/ImageGallery';\r\nimport Button from './components/Button/Button';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\nconst API_KEY = '23145424-17de0e2191faefedd106abc58';\r\n\r\nconst newPixabayFetchFunc = new PixabayFetchFunc(BASE_URL, API_KEY);\r\nconsole.log('SEARCH', newPixabayFetchFunc);\r\nclass App extends Component {\r\n  state = {\r\n    arreyImages: [],\r\n    searchQuery: '',\r\n    // searchPage: 1,\r\n    searchValue: '',\r\n    status: 'init',\r\n  };\r\n  componentDidMount() {}\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      prevState.searchQuery !== this.state.searchQuery\r\n      // ||      prevState.searchPage !== this.state.searchPage\r\n    ) {\r\n      newPixabayFetchFunc.resetPage();\r\n      newPixabayFetchFunc.searchQuery = this.state.searchQuery;\r\n\r\n      newPixabayFetchFunc\r\n        .getImages()\r\n        .then(response => {\r\n          this.setState({ arreyImages: response });\r\n          console.log(response);\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  }\r\n  onsubmitHandler = submitSearchForm => {\r\n    // this.maxPages = 0;\r\n\r\n    this.setState(() => ({\r\n      // arreyImages: [],\r\n      searchQuery: submitSearchForm,\r\n      // searchPage: 1,\r\n    }));\r\n  };\r\n\r\n  scrollHandler = () => {\r\n    // window.scrollTo({\r\n    //   top: document.documentElement.scrollHeight,\r\n    //   behavior: 'smooth',\r\n    // });\r\n    setTimeout(() => {\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: 'smooth',\r\n      });\r\n    }, 500);\r\n  };\r\n\r\n  loadMoreHandler = () => {\r\n    newPixabayFetchFunc.searchPage = 1;\r\n    console.log('searchPage', newPixabayFetchFunc.searchPage);\r\n    newPixabayFetchFunc.searchQuery = this.state.searchQuery;\r\n    newPixabayFetchFunc\r\n      .getImages()\r\n      .then(arreyImages => {\r\n        this.setState(prev => ({\r\n          arreyImages: [...prev.arreyImages, ...arreyImages],\r\n        }));\r\n        console.log(arreyImages);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n\r\n    // this.setState(() => ({\r\n    //   searchPage: this.state.searchPage + 1,\r\n    // }));\r\n    // console.log(this.searchPage);\r\n  };\r\n\r\n  render() {\r\n    console.log(this.scrollHandler);\r\n    return (\r\n      <div className=\"App\">\r\n        <Searchbar onSubmit={this.onsubmitHandler} />\r\n        {this.state.arreyImages.length > 0 && (\r\n          <ImageGallery arreyImages={this.state.arreyImages} />\r\n        )}\r\n        {this.state.arreyImages.length > 0 && (\r\n          <Button\r\n            loadMorer={this.loadMoreHandler}\r\n            scrollHandler={this.scrollHandler}\r\n            text=\"LOAD MORE...\"\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport '../src/styles.css';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}